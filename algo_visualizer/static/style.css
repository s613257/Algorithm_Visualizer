/* 
===================================================
---------------- 整體佈局和基礎樣式 ----------------
===================================================
*/
body {
    font-family: 'Inter', Arial, sans-serif;
    background-color: #f0f2f5;
    color: #333;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* 主要容器，使用Flexbox來佈局側邊欄和內容 */
.main-container {
    display: flex;
    max-width: 1400px;
    margin: 20px auto;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    min-height: calc(100vh - 40px); /* 讓容器至少佔滿視窗高度 */
}

/* 
===================================================
---------------- 側邊導覽欄樣式 ----------------
===================================================
*/
.sidebar {
    display: flex;
    flex-direction: column;
    width: 200px;
    padding: 30px;
    background-color: #f9f9f9;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-right: 1px solid #e0e0e0;
}

.sidebar header {
    display: flex; /* 使用 flex 佈局 */
    align-items: center; /* 垂直置中對齊 */
    gap: 10px; /* 設定 h1 和 icon 之間的間距 */
    margin-bottom: 15px;
}

.sidebar h1 {
    margin: 0; /* 移除 h1 的預設外邊距，以便更好地對齊 */
}

.sidebar-icon {
    /* 移除所有與絕對定位相關的屬性 */
    font-size: 2em;
    color: #007bff;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.sidebar-icon:hover {
    transform: scale(1.1); /* 滑鼠懸停時放大 */
}


.nav-btn {
    padding: 15px;
    margin-bottom: 15px;
    border: none;
    border-radius: 8px;
    background-color: #e9e9e9;
    cursor: pointer;
    font-size: 1.1em;
    font-weight: 500;
    transition: background-color 0.3s ease, transform 0.2s ease;
}

.nav-btn:hover {
    background-color: #dcdcdc;
    transform: translateY(-2px);
}

.nav-btn.active {
    background-color: #007bff;
    color: white;
    box-shadow: 0 4px 8px rgba(0, 123, 255, 0.2);
    transform: translateY(0);
}

/* 
===================================================
---------------- 主要內容區域樣式 ----------------
===================================================
*/
.content-area {
    flex-grow: 1;
    padding: 20px 40px;
    text-align: center;
    }

/* 標題與頁面標籤 */
.content-area h1 {
    color: #007BFF;
    margin-top: 5px;
    margin-bottom: 20px;
}
.content-area h2 {
    color: #495057;
    margin-top: 5px;
    margin-bottom: 10px;
}

/* 頁面內容容器，用於切換顯示 */
.page-content {
    display: none;
}
.page-content.active {
    display: block;
}

/* 
===================================================
---------------- 排序頁面樣式 ----------------
===================================================
*/
.number-input-group p {
    margin-bottom: 15px;
    font-size: 1.1em;
}

.inputs-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin-bottom: 20px;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
}

.num-input {
    width: 100%;
    padding: 8px;
    border: 1px solid #dddddd;
    border-radius: 4px;
    text-align: center;
    font-size: 1em;
}

#randomizeBtn {
    padding: 10px 20px;
    background-color: #6c757d;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-bottom: 30px;
}

#randomizeBtn:hover {
    background-color: #5a6268;
}

.algorithm-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 30px;
}

.algo-btn {
    padding: 12px 24px;
    font-size: 1em;
    background-color: #007BFF;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
}

.algo-btn:hover {
    background-color: #0056b3;
    transform: translateY(-2px);
}

.algo-btn:active {
    transform: translateY(0);
}

.algo-btn.active {
    background-color: #28a745;
    pointer-events: none;
}

.visualization-area {
    margin-bottom: 30px;
    border: 1px solid #eee;
    padding: 20px;
    border-radius: 8px;
    background-color: #f9f9f9;
}

.bars-container {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    height: 200px;
    gap: 5px;
    margin-bottom: 20px;
    position: relative;
}

.completion-message {
    position: absolute;
    top: 60%;
    left: 58%;
    transform: translate(-50%, -50%);
    font-size: 1.5em;
    font-weight: bold;
    color: green;
    padding: 10px 20px;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    display: none;
    white-space: nowrap;
}

.completion-message.show {
    display: block;
    z-index: 1000;
}

.bar {
    width: 40px;
    background-color: #007BFF;
    border: 1px solid #0056b3;
    transition: height 0.1s ease-in-out, background-color 0.1s ease-in-out;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    color: rgb(26, 25, 25);
    font-weight: bold;
    font-size: 0.9em;
    padding-bottom: 5px;
    box-sizing: border-box;
}

/* 特殊顏色標示 */
.bar.compared { background-color: #ffc107; }
.bar.swapped { background-color: #dc3545; }
.bar.sorted { background-color: #28a745; }
.bar.pivot { background-color: #6f42c1; }
.bar.active { background-color: #17a2b8; }

.controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

.controls button {
    padding: 10px 20px;
    background-color: #007BFF;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.controls button:hover:not(:disabled) {
    background-color: #0056b3;
}

.controls button:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
}

#speedSlider {
    width: 150px;
    -webkit-appearance: none;
    height: 8px;
    background: #d3d3d3;
    outline: none;
    opacity: 0.7;
    transition: opacity .2s;
    border-radius: 5px;
}

#speedSlider:hover {
    opacity: 1;
}

#speedSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #007BFF;
    cursor: pointer;
}

#speedSlider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #007BFF;
    cursor: pointer;
}

.result-info {
    justify-content: center;
    margin-top: 20px;
    padding: 5px;
    background-color: #e9ecef;
    border-radius: 4px;
    text-align: left;
    white-space: pre-wrap;
    border: 1px solid #d3d3d3;
}

.result-info p {
    margin: -15px 0;
    justify-content: center;
}

.result-info h2 {
    margin-left: 15px;
    text-align: center;
    margin: 0;
    padding: 15px;
    margin: -40px 0;
}

.result-info p span {
    margin-left: 15px;
    justify-content: center;
}

.result-content {
    display: flex;
    justify-content: center;
}

.left-panel,
.right-panel {
    width: 48%;
    justify-content: center;
}

/* 
===================================================
---------------- 搜尋頁面容器樣式 ----------------
===================================================
*/

/* 隱藏未選中的頁面 */
.page-content {
    display: none;
}

.search-header {
    text-align: center;
    margin-bottom: 20px;
}

#bfs-page ,#dfs-page{
    position: relative; /* 確保子元素的絕對定位是相對於此容器 */
}

.maze-and-legend-wrapper {
    display: block;
    text-align: center; /* 讓內部的子元素置中，例如迷宮 */
}

/* 確保迷宮容器也置中 */
.maze-container {
    margin: 0 auto; /* 這是讓區塊元素置中的經典方法 */
}

.color-legend {
    position: absolute; /* 啟用絕對定位 */
    top: 25px; /* 根據需求調整距離頂部的距離 */
    right: 25px; /* 距離右邊的距離 */
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #f9f9f9;
    width: 200px;
    box-sizing: border-box; /* 確保 padding 不會增加總寬度 */
    gap: 10px;
    padding: 15px;
    margin-top: 230px;
}

/* 迷宮容器的 CSS Grid 佈局 */
.maze-container {
    display: grid;
    gap: 5px;
    width: 500px;
    margin: 0 auto;
    border: 2px solid #333;
    padding: 15px;
    background-color: #f0f0f0;
}

/* 數字迷宮的特定樣式 (6x6) */
.maze-container.number-maze {
    grid-template-columns: repeat(6, 1fr); /* 6 列 */
    grid-template-rows: repeat(6, 1fr); /* 6 行 */
}

/* 牆壁迷宮的特定樣式 (10x10) */
.maze-container.wall-maze {
    grid-template-columns: repeat(10, 1fr); /* 10 列 */
    grid-template-rows: repeat(10, 1fr); /* 10 行 */
}

/* 迷宮方格樣式 */
.maze-cell {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2em;
    font-weight: bold;
    border: 1px solid #ccc;
    background-color: #fff;
    transition: background-color 0.3s ease, border 0.3s ease;
}

/* 數字迷宮方格的額外樣式 */
.maze-container.number-maze .maze-cell {
    width: 75px;
    height: 60px;
}

/* 牆壁迷宮方格的額外樣式 */
.maze-container.wall-maze .maze-cell {
    height: 45px; /* 保持正方形 */
}

/* 特殊方格樣式 (通用) */
.maze-cell.start {
    background-color: #d1f7d3;
    border: 2px solid green;
}

.maze-cell.end {
    background-color: #f7d1d1;
    border: 2px solid red;
}

/* 探索中的方格樣式 (通用) */
.maze-cell.visited {
    background-color: #f9e79f;
}

.maze-cell.path {
    background-color: #d2b4de;
}

/* 終點的樣式 (通用) */
.maze-cell.finished-path {
    background-color: #d2b4de;
    border: 3px solid #6c757d;
    animation: pulse 1s infinite alternate;
}

@keyframes pulse {
    from {
        box-shadow: 0 0 5px #d2b4de;
    }
    to {
        box-shadow: 0 0 20px #d2b4de;
    }
}

/* 牆壁樣式 */
.maze-cell.wall {
    background-color: #34495e; /* 深灰色 */
    cursor: not-allowed;
}

/* 按鈕樣式 (維持不變) */
#startSearchBtn, #resetSearchBtn, #startDfsBtn, #resetDfsBtn, .maze-type-btn{
    margin-top: 15px;
    padding: 10px 20px;
    background-color: #6c757d;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-bottom: 10px;
}

/* 可展開收合的容器群組 (維持不變) */
.collapsible-group {
    display: flex;
    flex-direction: column;
    margin-bottom: 15px;
}

.toggle-btn::after {
    /* content: "▼"; */
    font-size: 0.8em;
    margin-left: auto;
    transition: transform 0.2s ease;
}

.toggle-btn.active::after {
    transform: rotate(180deg);
}

.collapsible-content {
    display: none;
    flex-direction: column;
    padding-left: 20px;
    overflow: hidden;
    transition: max-height 0.3s ease-out, padding 0.3s ease;
}

.sub-nav-btn {
    padding: 12px 15px;
    margin-bottom: 5px;
    border: none;
    border-radius: 8px;
    background-color: transparent;
    cursor: pointer;
    font-size: 1.1em;
    font-weight: 500;
    transition: background-color 0.3s ease;
    text-align: left;
}

.sub-nav-btn:hover {
    background-color: #dcdcdc;
}

/* 搜尋演算法的動畫顏色 */
/* 探索中的格子（BFS/DFS 尋找過程） */
.maze-cell.examined {
    background-color: #ffd700; /* 黃色 */
    transition: background-color 0.2s ease-in-out;
}

/* 暫時亮起的撞牆格子 */
.maze-cell.examined-wall {
    background-color: #a53cce; /* 紫色 */
    transition: background-color 0.2s ease-in-out;
}

/* 死路或撞牆的格子（表示探索失敗） */
.maze-cell.deadEnd {
    background-color: #ff6347; /* 紅色 */
    transition: background-color 0.2s ease-in-out;
}

/* 最終找到的路徑 */
.maze-cell.path {
    background-color: #3cb371; /* 綠色 */
    transition: background-color 0.2s ease-in-out;
}

.legend-item {
    display: flex; /* 讓小色塊和文字排成一列 */
    align-items: center; /* 垂直居中 */
}

.legend-box {
    width: 20px; /* 小色塊的寬度 */
    height: 20px; /* 小色塊的高度 */
    margin-right: 10px; /* 小色塊與文字的間距 */
    border: 1px solid #ccc; /* 增加邊框，使顏色更明顯 */
}

.legend-text {
    font-size: 14px;
    color: #333;
    padding: 10px;
}



/* 
===================================================
---------------- 分類/分群頁面容器樣式 ----------------
===================================================
*/
#clustering-page {
    /* 使用 Flexbox 讓頁面內容垂直排列，並保持間距 */
    display: flex;
    flex-direction: column;
    gap: 20px;
    padding: 20px;
    background-color: #f9f9f9;
}

.clustering-container {
    display: flex;
    flex-direction: column;
    gap: 20px;
    width: 100%;
}

.top-row {
    display: flex;
    gap: 20px;
    /*height: 230px; /* 設定固定高度 */
}

.file-drop-area {
    /* 檔案拖放區的樣式 */
    border: 2px dashed #ccc;
    border-radius: 8px;
    background-color: #fff;
    flex: 2; /* 佔據更多空間 */
    min-height: 80px;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: #888;
    font-size: 1.1em;
    cursor: pointer;
    transition: background-color 0.3s, border-color 0.3s;
}

.file-drop-area:hover {
    background-color: #f0f0f0;
    border-color: #aaa;
}

.control-area {
    /* 按鈕控制區的樣式 */
    flex: 1; /* 佔據較少空間 */
    display: flex;
    flex-direction: column;
    gap: 15px;
    padding: 20px;
    min-width: 310px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.clustering-buttons {
    display: flex;
    gap: 10px;
}

.clustering-btn , .classification-btn{
    flex: 1;
    padding: 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    background-color: #3498db;
    color: white;
    font-size: 1em;
    cursor: pointer;
    transition: background-color 0.3s, border-color 0.3s;
}

.clustering-btn:hover {
    background-color: #e6e6e6;
    border-color: #aaa;
}

.execute-btn {
    padding: 12px;
    border: none;
    border-radius: 6px;
    background-color: #2ecc71;
    color: white;
    font-size: 1.1em;
    cursor: pointer;
    transition: background-color 0.3s;
}

.execute-btn:hover {
    background-color: #27ae60;
}

.data-preview {
    /* 資料預覽區的樣式 */
    flex: 2; /* 佔據更多空間 */
    padding: 20px;
    background-color: #fff;
    border: 1px solid #ccc;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    /*min-height: 195px; /* 保持最小高度，但移除最小寬度 */
    
    /* 移除 flexbox 相關的對齊屬性，交給 DataTables 處理 */
    /* 移除 min-width，讓它能彈性收縮 */
    /* 移除 text-align 和 color，讓 datatables 樣式生效 */

    /* 處理表格溢出問題，確保有捲軸 */
    overflow-x: auto; 
}

.bottom-row {
    display: flex;
    gap: 20px;
    height: 310px; /* 設定固定高度 */
}

.analysis-results {
    padding: 15px;
    border-radius: 8px;
    background-color: #f9f9f9;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    border: 1px solid #e0e0e0;
}

@media (max-width: 768px) {
    .page-content {
        flex-direction: column;
    }
    .left-panel {
        max-width: none;
    }
}

#results-chart-container {
    width: 600px; /* 或設定一個固定的像素值，例如 800px */
    height: 250px; /* 設定一個固定的像素值，例如 500px */
    margin: 0 auto; /* 讓容器水平置中 */
}

.mode-settings {
    display: none;
    margin: 10px 0;
}

input[type="text"],
input[type="number"] {
  border-radius: 8px; /* 數值越大，邊角越圓 */
  border: 1px solid #ccc; /* 邊框顏色和粗細 */
  padding: 5px; /* 增加內邊距，讓內容看起來不擠迫 */
}


/* 
===================================================
---------------- 筆記本功能樣式 ----------------
===================================================
*/
/* 筆記本的初始藍色 */
.sidebar-icon i {
    color: #4a90e2; /* 原本的藍色 */
    transition: all 0.5s ease;
}

/* 點擊後變為黃色並套用動畫效果 */
.book-active {
    color: #ffd700 !important; /* 金黃色 */
    animation: glow-and-shake 1s infinite alternate; /* 1秒動畫，無限次交替播放 */
}

/* 發光和晃動的 Keyframes 動畫 */
@keyframes glow-and-shake {
    0% {
        box-shadow: 0 0 5px rgba(255, 215, 0, 0.5), 0 0 10px rgba(255, 215, 0, 0.3);
        transform: rotate(0deg);
    }
    50% {
        box-shadow: 0 0 15px rgba(255, 215, 0, 1), 0 0 20px rgba(255, 215, 0, 0.8);
        transform: rotate(3deg); /* 向右晃動 */
    }
    100% {
        box-shadow: 0 0 5px rgba(255, 215, 0, 0.5), 0 0 10px rgba(255, 215, 0, 0.3);
        transform: rotate(-3deg); /* 向左晃動 */
    }
}

/* 新增的 SweetAlert2 全螢幕樣式
讓彈出視窗的高度和寬度都接近滿版，並移除邊距。
*/
.my-swal-popup-fullscreen {
    width: 90% !important; 
    max-width: 90% !important;
    height: 90vh !important; /* 增加高度，讓上下有更多空間 */
    margin: 0 !important;
    top: 50% !important; /* 垂直置中 */
    left: 45% !important; /* 水平置中 */
    transform: translate(-50%, -50%); /* 確保完美居中 */
    padding: 15px; /* 增加內邊距，避免內容太靠邊 */
}

/* 確保彈出視窗內的內容可以自由滾動，如果內容超出視窗大小 */
.my-swal-popup-fullscreen .swal2-html-container {
    overflow-y: auto;
    height: 100%; /* 確保內容容器的高度填滿父元素 */
    display: flex; /* 使用 Flexbox 來管理內部佈局 */
}

/* 調整書本佈局樣式 */
.note-content {
    display: flex;
    justify-content: space-between;
    height: 100%;
}

.book-page {
    flex: 1; /* 讓左右頁面等寬 */
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    overflow-y: auto; /* 如果內容太多，允許滾動 */
    margin: 0; /* 移除邊距，讓兩頁緊靠 */
}

/* 這是您需要新增的樣式 */
.book-page h4,
.book-page ul {
    text-align: left; /* 強制靠左對齊 */
}

/* 為了模仿書本中間的折線，我們可以為右頁添加左邊框 */
.right-page {
    border-left: none; /* 移除右頁的左邊框 */
}

.left-page {
    border-right: 1px solid #999; /* 增加左頁的右邊框作為中線 */
}


/* ---------------- 排序筆記本功能樣式 ---------------- */

/* 確保彈出視窗內的內容可以自由滾動，如果內容超出視窗大小 */
.my-swal-popup-fullscreen .swal2-html-container {
    overflow-y: auto;
    height: 100%;
    padding: 15px; /* 將 padding 移到這裡，讓滾動條位於內容內部 */
}

/* 新增：頂部固定導覽列 */
.note-navbar {
    position: sticky; /* 讓導覽列固定在頂部 */
    top: -15px; /* 向上移動 15px，以彌補 `.swal2-html-container` 的 padding */
    z-index: 10;
    background-color: #f9f9f9;
    border-bottom: 1px solid #ddd;
    padding: 10px;
    display: flex;
    justify-content: center;
    gap: 10px;
}

.note-navbar .nav-button {
    background-color: #4a90e2;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.3s;
}

.note-navbar .nav-button.active {
    background-color: #ffd700;
    color: #333;
    font-weight: bold;
}

/* 移除 .note-text-area 和 .note-image-area 上的 overflow-y */
.note-container {
    background-color: #f9f9f9;
    display: flex;
    /* 移除 height 屬性，讓其高度由內容撐開 */
    padding-top: 15px; /* 增加頂部內邊距，避免內容緊貼導覽列 */
    gap: 15px;
}

.note-text-area {
    background-color: #f9f9f9;
    flex: 1;
    /* 移除 overflow-y: auto; */
    padding-right: 15px;
}

.note-image-area {
    background-color: #f9f9f9;
    flex: 1;
    /* 移除 overflow-y: auto; */
    padding-left: 15px;
    border-left: 1px solid #ccc;
}

